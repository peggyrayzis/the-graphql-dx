import { Head, Notes, Image, Appear } from 'mdx-deck';
import { Split, Horizontal } from '@mdx-deck/layouts';
import {
  FullScreenBackground,
  AlignLeft,
  LayoutTop,
  TweetSlide,
  WhiteBackground,
  PurpleBackground,
  Emily,
  SplitWhite,
} from './components';

import { colors } from './theme';
export { theme } from './theme';

<FullScreenBackground src="./img/background.svg">
  <AlignLeft>
    <h1>
      The GraphQL
      <br />
      developer experience
    </h1>
    <h2>Apollo Day NYC 2019</h2>
  </AlignLeft>
</FullScreenBackground>

---

<FullScreenBackground src="./img/pizza.png" />

---

<FullScreenBackground src="./img/background.svg">
  <div
    style={{
      display: 'flex',
      flexDirection: 'row',
      height: '100%',
      justifyContent: 'center',
      alignItems: 'center',
    }}
  >
    <img
      src="./img/peggy.jpg"
      style={{ width: '300px', height: '300px', borderRadius: '50%' }}
    />
    <div style={{ margin: '0 0 0 30px' }}>
      <h1 style={{ margin: '10px', color: colors.white }}>@peggyrayzis</h1>
      <h2 style={{ margin: '10px', color: colors.white }}>
        Developer Experience
      </h2>
    </div>
  </div>
</FullScreenBackground>

---

export default WhiteBackground;

<img src="./img/communication.jpg" style={{ height: '530px' }} />

<Emily />

<Notes>
  when people ask you what is graphql, what do you say?
  <br />
  <br />
  probably the most common response is that graphql is a way to communicate between
  a client and an api. often times that api is a graphql server, but it doesn't have
  to be. it can even be a local cache!
  <br />
  <br />
  the way you communicate is with a query like the one you see in the middle.
  the client requests the query and the api returns back one response in exactly
  the same shape
</Notes>

---

# GraphQL is not about:

- Smaller payloads
- Fewer client/server roundtrips
- Preventing overfetching

<Notes>
  i'm going to take the semi controversial stance today that graphql is not
  about data over the wire. it's not about smaller payloads, or fewer
  roundtrips, or preventing overfetching. yes, these are technical benefits of
  graphql but to me, they're not the most compelling reasons to adopt graphql
  <br />
  <br />
  instead, i think the best part about graphql is the massive productivity boost
  it brings to developers
</Notes>

---

export default SplitWhite;

<h2 style={{textAlign: 'center'}}>GraphQL is about<br/>helping developers<br/>be more productive!</h2>

<div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  <img src="./img/team.jpg" style={{ height: '530px' }} />
  <Emily />
</div>

<Notes>
  the excellent developer experience is where graphql really shines, and it's
  the reason why your team should adopt it.
  <br />
  <br />
  you're probably wondering why should we make a serious technical decision based
  on DX? shouldn't we be optimizing for the user experience instead?
  <br />
  <br />i think it should be a balance. developer happiness and productivity are
  so important because they help us ship products faster, they help us attract the
  best engineers to our teams, and they helps us to retain engineers once they join.
  ultimately good dx will help you build the best ux you can.
</Notes>

---

# What does great DX look like?

<Notes>
so what does great developer experience look like?

</Notes>

---

<FullScreenBackground src="./img/konmari.jpg">
  <h1>Great DX should spark joy!</h1>
</FullScreenBackground>

<Notes>
  In the words of the great Marie Kondo, great DX should spark joy! And while
  it's not always possible to KonMari your developer tooling and get rid of the
  ones you hate (webpack), you can make more informed choices for future
  technologies
  <br />
  <br />
  so what does it mean for a developer tool to spark joy? after all it is a little
  subjective.
</Notes>

---

<Horizontal>
  <div
    style={{
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center',
      padding: '40px',
    }}
  >
    <img src="./img/prettier.png" />
    <h3>Nonobtrusive, out of the way</h3>
  </div>

<div
  style={{
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    padding: '40px',
  }}
>
  <img src="./img/react.png" />
  <h3>Predictable and intuitive</h3>
</div>

  <div
    style={{
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center',
      padding: '40px',
    }}
  >
    <img src="./img/vscodelogo.png" />
    <h3>Instant feedback loop</h3>
  </div>
</Horizontal>

<Notes>
  before i gave a version of this talk at react amsterdam, i conducted a poll on
  twitter and these were the most common themes that came up. a lot of you also
  mentioned specific tools that fit these principles. remember the first time
  you used prettier? it was amazing! all of a sudden i could write some janky
  unindented code, hit save and it magically fixed it for me! it's never
  something you think about anymore
  <br />
  <br />i also think react's component model does an excellent job of being
  predictable -- your ui is a function of your props plus state. finally, we
  have vscode and typescript, which are amazing together giving you instant
  feedback about the code you're writing. i think another thing these tools all
  have in common is that they filled a void in developer's lives
</Notes>

---

export default PurpleBackground;

<h2 style={{color: colors.lilac}}>Developers love tools that solve problems.</h2>

<Notes>
  tools with a great developer experience solve problems.
  <br />
  this is exactly the way i felt when i first learned graphql. it took a couple
  weeks to get my ahead around it, but once i did, it was amazing to see how
  much more productive i became. that's because it solved a real problem
</Notes>

---

export default Split;

<img
  src="./img/data-tweet.png"
  style={{ borderTopRightRadius: '8px', borderBottomRightRadius: '8px' }}
/>

<h1 style={{textAlign: 'center'}}>We write<br/>a lot of<br/>data fetching<br/>code.</h1>

<Notes>
  Data fetching in React is not the best experience, and that's because we have
  to write a lot of manual code that often makes up most of our app. adam, an
  engineer at airbnb, said that 90% of their 2 million line codebase is
  dedicated to styling and data fetching
  <br />
  <br />
  and if the majority of our time is spent data fetching, then that's probably where
  we should start if we want to improve the frontend development experience
</Notes>

---

export default Split;

<img src="./img/hooks-data.png" style={{ width: '85%', borderRadius: '8px' }} />

## You need a data layer:

- What's the shape of my data?
- How do I track loading and error states?
- How do I cache it?

<Notes>
  to get the most out of react, you really need a data layer. here's an example
  of some data fetching code with hooks. i think hooks are great, and they're a
  definite improvement over the class component model when it comes to
  reusability, but they don't solve the data fetching problem
  <br />
  <br />
  when i look at this code, a couple questions come to mind.
</Notes>

---

## We spend too much time<br/>trying to make an event emitter<br/>behave like a data cache.

<Notes>
  when people need a cache, they usually take their data fetching code and dump
  it into redux. but redux, at it's core, is just a simple event emitter. to get
  it to behave like a cache, you have to layer a bunch of middleware and
  packages like normalizr, and selectors, and write a lot of code. same thing
  goes for context, that was designed to solve the problem of passing down props
  multiple levels. it's not a cache and when your provider unmounts, all of your
  data disappears with it. what you really need is a cache.
</Notes>

---

export default Split;

<img src="./img/dogpaw.png" style={{borderTopRightRadius: '8px', borderBottomRightRadius: '8px'}} />
<Appear><h2 style={{padding: '30px', textAlign: 'center'}}>I promise<br/>that I won't<br/>put all my UI state<br/>into my cache.</h2></Appear>

<Notes>
  Some people can go overboard and put all of their data into the cache,
  especially UI state that shouldn't be there. so i want everyone to raise their
  hand and repeat after me.
</Notes>

---

<FullScreenBackground src="./img/background.svg">
  <h1 style={{ color: colors.black }}>
    If we optimize the data layer,
    <br />
    can we improve DX?
  </h1>
</FullScreenBackground>

<Notes>
  i think the key to improving our lives as react developers is optimizing the
  data layer, since it's where you spend most of your time. it's also about
  choosing the right tools for the job, like a data cache. if we can do those
  two things, then can we improve DX? with graphql, i think we can.
</Notes>

---

<FullScreenBackground src="./img/dogscared.jpg">
  <div
    style={{
      display: 'flex',
      flexDirection: 'column',
      justifyContent: 'center',
    }}
  >
    <h1 style={{ margin: '10px', color: colors.white }}>Demo time!!</h1>
    <a href="https://github.com/peggyrayzis/redux-to-graphql">
      <h3 style={{ margin: '10px', color: colors.lilac }}>
        https://github.com/peggyrayzis/redux-to-graphql
      </h3>
    </a>
  </div>
</FullScreenBackground>

<Notes>
  i can show you better than i can tell you, so the next part of this talk is
  going to be some live demos so you can see for yourself that apollo is that
  missing piece that makes react come to life.
</Notes>

---

export default Split;

<img src="./img/cloc.png" />

<h1 style={{textAlign: 'center'}}>Do more with 40% less code.</h1>

---

export default Split;

<img
  src="./img/vscode.png"
  style={{ borderTopRightRadius: '8px', borderBottomRightRadius: '8px' }}
/>

<h1 style={{textAlign: 'center'}}>Prediction:<br/>Our data layer<br/>will become smarter<br/>over time.</h1>

---

export default WhiteBackground;

<img src="./img/appstack.jpg" style={{ height: '90%' }} />

<Emily />

<Notes>
  you can do this right now. you can do it incrementally. apollo brings this to
  you in a lightweight frinction free way the product team can do it themselves
  this is where you want your team to be. this is the big prize you get when
  you're there
</Notes>

---

export default SplitWhite;

<h1 style={{textAlign: 'center'}}>Let's GraphQL together!</h1>
<h2 style={{textAlign: 'center'}}>@peggyrayzis</h2>

<div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  <img src="./img/team.jpg" style={{ height: '530px' }} />
  <Emily />
</div>
